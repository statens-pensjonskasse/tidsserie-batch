#!groovy
@Library('jenkins-pipeline-library')
import no.spk.jenkins.pipeline.ci.config.CIPipelineConfig

ciPipeline {
    config = CIPipelineConfig
            .getGitflowConfig(prod: 'master', dev: 'develop', shortLived: '')
            .withTriggers(cron: '@daily', fromBranches: 'develop') // Trigges også på commit ved hjelp av webhook i Bitbucket
            .useMaven(jdkVersion: 21, build: 'clean install -DskipTests', publish: 'deploy -DskipTests')
            .withPublish(branches: 'develop')                                  // Snapshots lages fra develop
            .withEmailNotifications(recipients: 'ITO-TeamPremie@spk.no')
            .withNoSonarQube()
}
